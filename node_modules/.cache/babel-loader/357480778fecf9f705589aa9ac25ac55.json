{"ast":null,"code":"import _classCallCheck from\"C:/Users/sonwonjae/react/react-tutorial/canvas-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/sonwonjae/react/react-tutorial/canvas-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/sonwonjae/react/react-tutorial/canvas-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/sonwonjae/react/react-tutorial/canvas-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import*as THREE from'three';import OrbitControls from'three-orbitcontrols';import*as dat from'dat.gui';import gsap from'gsap';import{jsx as _jsx}from\"react/jsx-runtime\";export var ThreeTuto2=/*#__PURE__*/function(_Component){_inherits(ThreeTuto2,_Component);var _super=_createSuper(ThreeTuto2);function ThreeTuto2(){var _this;_classCallCheck(this,ThreeTuto2);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.animate=function(){_this.renderer.render(_this.scene,_this.camera);requestAnimationFrame(_this.animate);// 배경 움직임\n_this.frame+=0.01;var _this$planeMesh$geome=_this.planeMesh.geometry.attributes.position,array=_this$planeMesh$geome.array,originalPosition=_this$planeMesh$geome.originalPosition,randomValue=_this$planeMesh$geome.randomValue;for(var i=0;i<array.length;i+=3){// x\narray[i]=originalPosition[i]+Math.cos(_this.frame+randomValue[i])*0.01;_this.planeMesh.geometry.attributes.position.needsUpdate=true;// y\narray[i+1]=originalPosition[i+1]+Math.sin(_this.frame+randomValue[i+1])*0.01;_this.planeMesh.geometry.attributes.position.needsUpdate=true;}_this.raycaster.setFromCamera(_this.mouse,_this.camera);var intersects=_this.raycaster.intersectObject(_this.planeMesh);if(intersects.length>0){var color=intersects[0].object.geometry.attributes.color;// vertice 1\ncolor.setX(intersects[0].face.a,0.3);color.setY(intersects[0].face.a,0.6);color.setZ(intersects[0].face.a,1);// vertice 2\ncolor.setX(intersects[0].face.b,0.3);color.setY(intersects[0].face.b,0.6);color.setZ(intersects[0].face.b,1);// vertice 3\ncolor.setX(intersects[0].face.c,0.3);color.setY(intersects[0].face.c,0.6);color.setZ(intersects[0].face.c,1);color.needsUpdate=true;var initialColor={r:0.05,g:0.1,b:0.2};var hoverColor={r:0.3,g:0.6,b:1};gsap.to(hoverColor,{r:initialColor.r,g:initialColor.g,b:initialColor.b,duration:1,onUpdate:function onUpdate(){// vertice 1\ncolor.setX(intersects[0].face.a,hoverColor.r);color.setY(intersects[0].face.a,hoverColor.g);color.setZ(intersects[0].face.a,hoverColor.b);// vertice 2\ncolor.setX(intersects[0].face.b,hoverColor.r);color.setY(intersects[0].face.b,hoverColor.g);color.setZ(intersects[0].face.b,hoverColor.b);// vertice 3\ncolor.setX(intersects[0].face.c,hoverColor.r);color.setY(intersects[0].face.c,hoverColor.g);color.setZ(intersects[0].face.c,hoverColor.b);}});}};return _this;}_createClass(ThreeTuto2,[{key:\"componentDidMount\",value:function componentDidMount(){var width=window.innerWidth;var height=window.innerHeight;this.width=width;this.height=height;// resize 이벤트\nwindow.addEventListener('resize',function(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);});//raycaster 추가\nvar raycaster=new THREE.Raycaster();// 카메라로 찍으려는 3D무대\nvar scene=new THREE.Scene();// 카메라\nvar camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);// 플레이어 or 영사기\nvar renderer=new THREE.WebGLRenderer();renderer.setSize(width,height);// 픽셀단위로 진하게 해줌\nrenderer.setPixelRatio(devicePixelRatio);// HTML canvas\nthis.element.appendChild(renderer.domElement);//GUI\nvar gui=new dat.GUI();var world={plane:{width:800,height:800,widthSegments:100,heightSegments:100}};// x값 조정하는 GUI\ngui.add(world.plane,'width',100,600).onChange(generatePlane);// y값 조정하는 GUI\ngui.add(world.plane,'height',100,600).onChange(generatePlane);// x seg값 조정하는 GUI\ngui.add(world.plane,'widthSegments',10,200).onChange(generatePlane);// y seg값 조정하는 GUI\ngui.add(world.plane,'heightSegments',10,200).onChange(generatePlane);var randomValue=[];function generatePlane(){planeMesh.geometry.dispose();planeMesh.geometry=new THREE.PlaneGeometry(world.plane.width,world.plane.height,world.plane.widthSegments,world.plane.heightSegments);// x,y,z 값 조정법\nvar array=planeMesh.geometry.attributes.position.array;for(var i=0;i<array.length;i++){if(i%3===0){var x=array[i];var y=array[i+1];var z=array[i+2];array[i]=x+(Math.random()-0.5)*3;array[i+2]=y+(Math.random()-0.5)*3;array[i+2]=z+(Math.random()-0.5)*3;}randomValue.push(Math.random()*Math.PI*3);}// randomValue 정의\nplaneMesh.geometry.attributes.position.randomValue=randomValue;// OriginalPosition 정의\nplaneMesh.geometry.attributes.position.originalPosition=planeMesh.geometry.attributes.position.array;var colors=[];for(var _i=0;_i<planeMesh.geometry.attributes.position.count;_i++){// r,g,b\ncolors.push(0.05,0.1,0.2);}planeMesh.geometry.setAttribute('color',new THREE.BufferAttribute(new Float32Array(colors),3));}// PlaneGeometry\nvar planeGeometry=new THREE.PlaneGeometry(world.plane.width,world.plane.height,world.plane.widthSegments,world.plane.heightSegments);var planeMeterial=new THREE.MeshPhongMaterial({side:THREE.DoubleSide,flatShading:THREE.FlatShading,vertexColors:true});var planeMesh=new THREE.Mesh(planeGeometry,planeMeterial);scene.add(planeMesh);generatePlane();// 빛\nvar light=new THREE.DirectionalLight(0xffffff,1);light.position.set(1,-1,1);scene.add(light);// 뒤쪽 빛\nvar backLight=new THREE.DirectionalLight(0xffffff,1);backLight.position.set(0,0,-1);scene.add(backLight);// OrbitControls\nnew OrbitControls(camera,renderer.domElement);// 카메라 뷰 깊이\ncamera.position.z=50;camera.rotateX(-50);camera.rotateY(-50);console.log(camera);var mouse={x:undefined,y:undefined};window.addEventListener('mousemove',function(e){mouse.x=e.clientX/window.innerWidth*2-1;mouse.y=-(e.clientY/window.innerHeight)*2+1;});// frame\nvar frame=0;this.scene=scene;this.camera=camera;this.renderer=renderer;this.planeMesh=planeMesh;this.mouse=mouse;this.raycaster=raycaster;this.frame=frame;this.randomValue=randomValue;this.animate();// 클릭 옵션\ndocument.querySelector('#link').addEventListener('click',function(e){e.preventDefault();gsap.to('#container',{opacity:0});gsap.to(camera.position,{x:75,y:-75,z:10,duration:1.2});gsap.to(camera.rotation,{x:1,y:1,duration:1.2,onComplete:function onComplete(){window.location='/main';}});gsap.to(light,{intensity:0,duration:1.2});});}// 첫 줄은 카메라 뷰로 렌더링하겠다\n// 다음 두 줄은 3D박스를 x,y축으로 0.01씩 이동하겠다\n// 마지막 requestAnimationFrame 함수는 this.animate함수를 계속 호출하라는 뜻\n// 최대 1ms (1초에 60번씩 그려라) => 성능이 낮은 PC나 CPU/GPU 점유율에 따라 동적으로 변하기도 함\n},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{ref:function ref(el){return _this2.element=el;}});}}]);return ThreeTuto2;}(Component);export default ThreeTuto2;","map":{"version":3,"sources":["C:/Users/sonwonjae/react/react-tutorial/canvas-example/src/three/ThreeTuto2.js"],"names":["React","Component","THREE","OrbitControls","dat","gsap","ThreeTuto2","animate","renderer","render","scene","camera","requestAnimationFrame","frame","planeMesh","geometry","attributes","position","array","originalPosition","randomValue","i","length","Math","cos","needsUpdate","sin","raycaster","setFromCamera","mouse","intersects","intersectObject","color","object","setX","face","a","setY","setZ","b","c","initialColor","r","g","hoverColor","to","duration","onUpdate","width","window","innerWidth","height","innerHeight","addEventListener","aspect","updateProjectionMatrix","setSize","Raycaster","Scene","PerspectiveCamera","WebGLRenderer","setPixelRatio","devicePixelRatio","element","appendChild","domElement","gui","GUI","world","plane","widthSegments","heightSegments","add","onChange","generatePlane","dispose","PlaneGeometry","x","y","z","random","push","PI","colors","count","setAttribute","BufferAttribute","Float32Array","planeGeometry","planeMeterial","MeshPhongMaterial","side","DoubleSide","flatShading","FlatShading","vertexColors","Mesh","light","DirectionalLight","set","backLight","rotateX","rotateY","console","log","undefined","e","clientX","clientY","document","querySelector","preventDefault","opacity","rotation","onComplete","location","intensity","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport * as THREE from 'three';\r\nimport OrbitControls from 'three-orbitcontrols';\r\n\r\nimport * as dat from 'dat.gui';\r\nimport gsap from 'gsap';\r\n\r\nexport class ThreeTuto2 extends Component {\r\n  componentDidMount() {\r\n    const width = window.innerWidth;\r\n    const height = window.innerHeight;\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    // resize 이벤트\r\n    window.addEventListener('resize', () => {\r\n      camera.aspect = window.innerWidth / window.innerHeight;\r\n      camera.updateProjectionMatrix();\r\n      renderer.setSize(window.innerWidth, window.innerHeight);\r\n    });\r\n\r\n    //raycaster 추가\r\n    const raycaster = new THREE.Raycaster();\r\n\r\n    // 카메라로 찍으려는 3D무대\r\n    const scene = new THREE.Scene();\r\n\r\n    // 카메라\r\n    const camera = new THREE.PerspectiveCamera(\r\n      75,\r\n      window.innerWidth / window.innerHeight,\r\n      0.1,\r\n      1000\r\n    );\r\n\r\n    // 플레이어 or 영사기\r\n    const renderer = new THREE.WebGLRenderer();\r\n    renderer.setSize(width, height);\r\n\r\n    // 픽셀단위로 진하게 해줌\r\n    renderer.setPixelRatio(devicePixelRatio);\r\n\r\n    // HTML canvas\r\n    this.element.appendChild(renderer.domElement);\r\n    //GUI\r\n    const gui = new dat.GUI();\r\n    const world = {\r\n      plane: {\r\n        width: 800,\r\n        height: 800,\r\n        widthSegments: 100,\r\n        heightSegments: 100\r\n      }\r\n    };\r\n\r\n    // x값 조정하는 GUI\r\n    gui.add(world.plane, 'width', 100, 600).onChange(generatePlane);\r\n\r\n    // y값 조정하는 GUI\r\n    gui.add(world.plane, 'height', 100, 600).onChange(generatePlane);\r\n\r\n    // x seg값 조정하는 GUI\r\n    gui.add(world.plane, 'widthSegments', 10, 200).onChange(generatePlane);\r\n\r\n    // y seg값 조정하는 GUI\r\n    gui.add(world.plane, 'heightSegments', 10, 200).onChange(generatePlane);\r\n    const randomValue = [];\r\n\r\n    function generatePlane() {\r\n      planeMesh.geometry.dispose();\r\n      planeMesh.geometry = new THREE.PlaneGeometry(\r\n        world.plane.width,\r\n        world.plane.height,\r\n        world.plane.widthSegments,\r\n        world.plane.heightSegments\r\n      );\r\n\r\n      // x,y,z 값 조정법\r\n      const { array } = planeMesh.geometry.attributes.position;\r\n      for (let i = 0; i < array.length; i++) {\r\n        if (i % 3 === 0) {\r\n          const x = array[i];\r\n          const y = array[i + 1];\r\n          const z = array[i + 2];\r\n\r\n          array[i] = x + (Math.random() - 0.5) * 3;\r\n          array[i + 2] = y + (Math.random() - 0.5) * 3;\r\n          array[i + 2] = z + (Math.random() - 0.5) * 3;\r\n        }\r\n        randomValue.push(Math.random() * Math.PI * 3);\r\n      }\r\n\r\n      // randomValue 정의\r\n      planeMesh.geometry.attributes.position.randomValue = randomValue;\r\n\r\n      // OriginalPosition 정의\r\n      planeMesh.geometry.attributes.position.originalPosition =\r\n        planeMesh.geometry.attributes.position.array;\r\n      const colors = [];\r\n      for (let i = 0; i < planeMesh.geometry.attributes.position.count; i++) {\r\n        // r,g,b\r\n        colors.push(0.05, 0.1, 0.2);\r\n      }\r\n\r\n      planeMesh.geometry.setAttribute(\r\n        'color',\r\n        new THREE.BufferAttribute(new Float32Array(colors), 3)\r\n      );\r\n    }\r\n\r\n    // PlaneGeometry\r\n    const planeGeometry = new THREE.PlaneGeometry(\r\n      world.plane.width,\r\n      world.plane.height,\r\n      world.plane.widthSegments,\r\n      world.plane.heightSegments\r\n    );\r\n    const planeMeterial = new THREE.MeshPhongMaterial({\r\n      side: THREE.DoubleSide,\r\n      flatShading: THREE.FlatShading,\r\n      vertexColors: true\r\n    });\r\n    const planeMesh = new THREE.Mesh(planeGeometry, planeMeterial);\r\n    scene.add(planeMesh);\r\n    generatePlane();\r\n\r\n    // 빛\r\n    const light = new THREE.DirectionalLight(0xffffff, 1);\r\n    light.position.set(1, -1, 1);\r\n    scene.add(light);\r\n\r\n    // 뒤쪽 빛\r\n    const backLight = new THREE.DirectionalLight(0xffffff, 1);\r\n    backLight.position.set(0, 0, -1);\r\n    scene.add(backLight);\r\n\r\n    // OrbitControls\r\n    new OrbitControls(camera, renderer.domElement);\r\n\r\n    // 카메라 뷰 깊이\r\n    camera.position.z = 50;\r\n    camera.rotateX(-50);\r\n    camera.rotateY(-50);\r\n    console.log(camera);\r\n\r\n    const mouse = {\r\n      x: undefined,\r\n      y: undefined\r\n    };\r\n\r\n    window.addEventListener('mousemove', (e) => {\r\n      mouse.x = (e.clientX / window.innerWidth) * 2 - 1;\r\n      mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;\r\n    });\r\n\r\n    // frame\r\n    const frame = 0;\r\n\r\n    this.scene = scene;\r\n    this.camera = camera;\r\n    this.renderer = renderer;\r\n    this.planeMesh = planeMesh;\r\n\r\n    this.mouse = mouse;\r\n    this.raycaster = raycaster;\r\n\r\n    this.frame = frame;\r\n    this.randomValue = randomValue;\r\n    this.animate();\r\n\r\n    // 클릭 옵션\r\n    document.querySelector('#link').addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      gsap.to('#container', {\r\n        opacity: 0\r\n      });\r\n      gsap.to(camera.position, {\r\n        x: 75,\r\n        y: -75,\r\n        z: 10,\r\n        duration: 1.2\r\n      });\r\n      gsap.to(camera.rotation, {\r\n        x: 1,\r\n        y: 1,\r\n        duration: 1.2,\r\n        onComplete: () => {\r\n          window.location = '/main';\r\n        }\r\n      });\r\n      gsap.to(light, {\r\n        intensity: 0,\r\n        duration: 1.2\r\n      });\r\n    });\r\n  }\r\n\r\n  // 첫 줄은 카메라 뷰로 렌더링하겠다\r\n  // 다음 두 줄은 3D박스를 x,y축으로 0.01씩 이동하겠다\r\n  // 마지막 requestAnimationFrame 함수는 this.animate함수를 계속 호출하라는 뜻\r\n  // 최대 1ms (1초에 60번씩 그려라) => 성능이 낮은 PC나 CPU/GPU 점유율에 따라 동적으로 변하기도 함\r\n\r\n  animate = () => {\r\n    this.renderer.render(this.scene, this.camera);\r\n    requestAnimationFrame(this.animate);\r\n\r\n    // 배경 움직임\r\n    this.frame += 0.01;\r\n    const {\r\n      array,\r\n      originalPosition,\r\n      randomValue\r\n    } = this.planeMesh.geometry.attributes.position;\r\n\r\n    for (let i = 0; i < array.length; i += 3) {\r\n      // x\r\n      array[i] =\r\n        originalPosition[i] + Math.cos(this.frame + randomValue[i]) * 0.01;\r\n\r\n      this.planeMesh.geometry.attributes.position.needsUpdate = true;\r\n\r\n      // y\r\n      array[i + 1] =\r\n        originalPosition[i + 1] +\r\n        Math.sin(this.frame + randomValue[i + 1]) * 0.01;\r\n\r\n      this.planeMesh.geometry.attributes.position.needsUpdate = true;\r\n    }\r\n\r\n    this.raycaster.setFromCamera(this.mouse, this.camera);\r\n    const intersects = this.raycaster.intersectObject(this.planeMesh);\r\n    if (intersects.length > 0) {\r\n      const { color } = intersects[0].object.geometry.attributes;\r\n\r\n      // vertice 1\r\n      color.setX(intersects[0].face.a, 0.3);\r\n      color.setY(intersects[0].face.a, 0.6);\r\n      color.setZ(intersects[0].face.a, 1);\r\n\r\n      // vertice 2\r\n      color.setX(intersects[0].face.b, 0.3);\r\n      color.setY(intersects[0].face.b, 0.6);\r\n      color.setZ(intersects[0].face.b, 1);\r\n\r\n      // vertice 3\r\n      color.setX(intersects[0].face.c, 0.3);\r\n      color.setY(intersects[0].face.c, 0.6);\r\n      color.setZ(intersects[0].face.c, 1);\r\n\r\n      color.needsUpdate = true;\r\n\r\n      const initialColor = {\r\n        r: 0.05,\r\n        g: 0.1,\r\n        b: 0.2\r\n      };\r\n\r\n      const hoverColor = {\r\n        r: 0.3,\r\n        g: 0.6,\r\n        b: 1\r\n      };\r\n      gsap.to(hoverColor, {\r\n        r: initialColor.r,\r\n        g: initialColor.g,\r\n        b: initialColor.b,\r\n        duration: 1,\r\n        onUpdate: () => {\r\n          // vertice 1\r\n          color.setX(intersects[0].face.a, hoverColor.r);\r\n          color.setY(intersects[0].face.a, hoverColor.g);\r\n          color.setZ(intersects[0].face.a, hoverColor.b);\r\n\r\n          // vertice 2\r\n          color.setX(intersects[0].face.b, hoverColor.r);\r\n          color.setY(intersects[0].face.b, hoverColor.g);\r\n          color.setZ(intersects[0].face.b, hoverColor.b);\r\n\r\n          // vertice 3\r\n          color.setX(intersects[0].face.c, hoverColor.r);\r\n          color.setY(intersects[0].face.c, hoverColor.g);\r\n          color.setZ(intersects[0].face.c, hoverColor.b);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return <div ref={(el) => (this.element = el)}></div>;\r\n  }\r\n}\r\n\r\nexport default ThreeTuto2;\r\n"]},"metadata":{},"sourceType":"module"}